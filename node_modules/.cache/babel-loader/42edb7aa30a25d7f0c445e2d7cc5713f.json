{"ast":null,"code":"var _jsxFileName = \"C:\\\\arete\\\\AlphaDAO-react\\\\src\\\\views\\\\EarlyClaim\\\\EarlyClaim.jsx\",\n    _s = $RefreshSig$();\n\nimport { useCallback, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Box, Button, FormControl, Grid, InputAdornment, InputLabel, Link, OutlinedInput, Paper, SvgIcon, Tab, Tabs, Typography, Zoom } from \"@material-ui/core\";\nimport RebaseTimer from \"../../components/RebaseTimer/RebaseTimer\";\nimport TabPanel from \"../../components/TabPanel\";\nimport { trim } from \"../../helpers\";\nimport { changeApproval, exchangeAOX } from \"../../slices/StakeThunk\";\nimport \"./earlyclaim.scss\";\nimport { useWeb3Context } from \"src/hooks/web3Context\";\nimport { isPendingTxn, txnButtonText } from \"src/slices/PendingTxnsSlice\";\nimport { Skeleton } from \"@material-ui/lab\";\nimport { error } from \"../../slices/MessagesSlice\";\nimport { ethers } from \"ethers\";\nimport ConnectButton from \"../../components/ConnectButton\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction a11yProps(index) {\n  return {\n    id: `simple-tab-${index}`,\n    \"aria-controls\": `simple-tabpanel-${index}`\n  };\n}\n\nfunction EarlyClaim() {\n  _s();\n\n  const dispatch = useDispatch();\n  const {\n    provider,\n    address,\n    connected,\n    connect,\n    chainID\n  } = useWeb3Context();\n  const [zoomed, setZoomed] = useState(false);\n  const view = 0;\n  const isAppLoading = useSelector(state => state.app.loading);\n  const ohmBalance = useSelector(state => {\n    return state.account.balances && state.account.balances.ohm;\n  });\n  const aguruAllowance = useSelector(state => {\n    return state.account.claim && state.account.claim.aguruAllowance;\n  });\n  const aguruBalance = useSelector(state => {\n    return state.account.balances && state.account.balances.aguru;\n  });\n  const pendingTransactions = useSelector(state => {\n    return state.pendingTransactions;\n  });\n\n  const onSeekApproval = async token => {\n    await dispatch(changeApproval({\n      address,\n      token,\n      provider,\n      networkID: chainID\n    }));\n  };\n\n  const onExchange = async () => {\n    // eslint-disable-next-line no-restricted-globals\n    if (isNaN(aguruBalance) || aguruBalance <= 0 || aguruBalance === \"\") {\n      // eslint-disable-next-line no-alert\n      return dispatch(error(\"You do not have any aOX to convert to OX\"));\n    }\n\n    await dispatch(exchangeAOX({\n      address,\n      aguruBalance,\n      provider,\n      networkID: chainID\n    }));\n  };\n\n  const hasAllowance = useCallback(token => {\n    if (token === \"aguru\") return aguruAllowance > 0;\n    return 0;\n  }, [aguruAllowance]);\n  const isAllowanceDataLoading = aguruAllowance == null;\n  let modalButton = [];\n  modalButton.push( /*#__PURE__*/_jsxDEV(ConnectButton, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 20\n  }, this));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"stake-view\",\n    className: \"stake-metrics\",\n    children: /*#__PURE__*/_jsxDEV(Zoom, {\n      in: true,\n      onEntered: () => setZoomed(true),\n      children: /*#__PURE__*/_jsxDEV(Paper, {\n        className: `ohm-card`,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          direction: \"column\",\n          spacing: 2,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-header\",\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h5\",\n                children: \"Exchange aOX for OX\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 95,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"staking-area\",\n            children: !address ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stake-wallet-notification\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"wallet-menu\",\n                id: \"wallet-menu\",\n                children: modalButton\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                color: \"textSecondary\",\n                variant: \"h6\",\n                children: \"Connect your wallet to exchange aOX for OX\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Box, {\n                className: \"stake-action-area\",\n                children: /*#__PURE__*/_jsxDEV(Box, {\n                  className: \"stake-action-row \",\n                  display: \"flex\",\n                  alignItems: \"center\",\n                  children: [address && !isAllowanceDataLoading ? !hasAllowance(\"aguru\") && /*#__PURE__*/_jsxDEV(Box, {\n                    className: \"help-text\",\n                    children: /*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"body1\",\n                      className: \"stake-note\",\n                      color: \"textSecondary\",\n                      children: /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [\"First time exchanging \", /*#__PURE__*/_jsxDEV(\"b\", {\n                          children: \"aOX\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 118,\n                          columnNumber: 55\n                        }, this), \"?\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 119,\n                          columnNumber: 33\n                        }, this), \"Please approve AlphaDAO to exchange your \", /*#__PURE__*/_jsxDEV(\"b\", {\n                          children: \"aOX\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 120,\n                          columnNumber: 74\n                        }, this), \" for \", /*#__PURE__*/_jsxDEV(\"b\", {\n                          children: \"OX\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 120,\n                          columnNumber: 89\n                        }, this), \".\"]\n                      }, void 0, true)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 116,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 115,\n                    columnNumber: 27\n                  }, this) : /*#__PURE__*/_jsxDEV(Skeleton, {\n                    width: \"150px\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 126,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n                    value: view,\n                    index: 0,\n                    className: \"stake-tab-panel\",\n                    children: isAllowanceDataLoading ? /*#__PURE__*/_jsxDEV(Skeleton, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 131,\n                      columnNumber: 27\n                    }, this) : address && hasAllowance(\"aguru\") ? /*#__PURE__*/_jsxDEV(Button, {\n                      className: \"stake-button\",\n                      variant: \"contained\",\n                      color: \"primary\",\n                      disabled: isPendingTxn(pendingTransactions, \"claiming\"),\n                      onClick: () => {\n                        onExchange();\n                      },\n                      children: txnButtonText(pendingTransactions, \"claiming\", \"Exchange aOX\")\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 133,\n                      columnNumber: 27\n                    }, this) : /*#__PURE__*/_jsxDEV(Button, {\n                      className: \"stake-button\",\n                      variant: \"contained\",\n                      color: \"primary\",\n                      disabled: isPendingTxn(pendingTransactions, \"approve_claiming\"),\n                      onClick: () => {\n                        console.log(\"clicked\");\n                        onSeekApproval(\"aguru\");\n                      },\n                      children: txnButtonText(pendingTransactions, \"approve_claiming\", \"Approve\")\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 145,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 129,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 112,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `stake-user-data`,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"data-row\",\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body1\",\n                    children: \"Your Balance\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 164,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body1\",\n                    children: isAppLoading ? /*#__PURE__*/_jsxDEV(Skeleton, {\n                      width: \"80px\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 166,\n                      columnNumber: 41\n                    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [trim(ohmBalance, 4), \" OX\"]\n                    }, void 0, true)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 165,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 163,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"data-row\",\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body1\",\n                    children: \"Amount to Exchange\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 171,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body1\",\n                    children: isAppLoading ? /*#__PURE__*/_jsxDEV(Skeleton, {\n                      width: \"80px\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 173,\n                      columnNumber: 41\n                    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [trim(aguruBalance, 0), \" aOX\"]\n                    }, void 0, true)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 172,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n}\n\n_s(EarlyClaim, \"7MiBC/GewghhE+ZCb3n/f5bkWDo=\", false, function () {\n  return [useDispatch, useWeb3Context, useSelector, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = EarlyClaim;\nexport default EarlyClaim;\n\nvar _c;\n\n$RefreshReg$(_c, \"EarlyClaim\");","map":{"version":3,"sources":["C:/arete/AlphaDAO-react/src/views/EarlyClaim/EarlyClaim.jsx"],"names":["useCallback","useState","useDispatch","useSelector","Box","Button","FormControl","Grid","InputAdornment","InputLabel","Link","OutlinedInput","Paper","SvgIcon","Tab","Tabs","Typography","Zoom","RebaseTimer","TabPanel","trim","changeApproval","exchangeAOX","useWeb3Context","isPendingTxn","txnButtonText","Skeleton","error","ethers","ConnectButton","a11yProps","index","id","EarlyClaim","dispatch","provider","address","connected","connect","chainID","zoomed","setZoomed","view","isAppLoading","state","app","loading","ohmBalance","account","balances","ohm","aguruAllowance","claim","aguruBalance","aguru","pendingTransactions","onSeekApproval","token","networkID","onExchange","isNaN","hasAllowance","isAllowanceDataLoading","modalButton","push","console","log"],"mappings":"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","sourcesContent":["import { useCallback, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  Box,\n  Button,\n  FormControl,\n  Grid,\n  InputAdornment,\n  InputLabel,\n  Link,\n  OutlinedInput,\n  Paper,\n  SvgIcon,\n  Tab,\n  Tabs,\n  Typography,\n  Zoom,\n} from \"@material-ui/core\";\nimport RebaseTimer from \"../../components/RebaseTimer/RebaseTimer\";\nimport TabPanel from \"../../components/TabPanel\";\nimport { trim } from \"../../helpers\";\nimport { changeApproval, exchangeAOX } from \"../../slices/StakeThunk\";\nimport \"./earlyclaim.scss\";\nimport { useWeb3Context } from \"src/hooks/web3Context\";\nimport { isPendingTxn, txnButtonText } from \"src/slices/PendingTxnsSlice\";\nimport { Skeleton } from \"@material-ui/lab\";\nimport { error } from \"../../slices/MessagesSlice\";\nimport { ethers } from \"ethers\";\nimport ConnectButton from \"../../components/ConnectButton\";\n\nfunction a11yProps(index) {\n  return {\n    id: `simple-tab-${index}`,\n    \"aria-controls\": `simple-tabpanel-${index}`,\n  };\n}\n\nfunction EarlyClaim() {\n  const dispatch = useDispatch();\n  const { provider, address, connected, connect, chainID } = useWeb3Context();\n\n  const [zoomed, setZoomed] = useState(false);\n  const view = 0;\n\n  const isAppLoading = useSelector(state => state.app.loading);\n  const ohmBalance = useSelector(state => {\n    return state.account.balances && state.account.balances.ohm;\n  });\n  const aguruAllowance = useSelector(state => {\n    return state.account.claim && state.account.claim.aguruAllowance;\n  });\n  const aguruBalance = useSelector(state => {\n    return state.account.balances && state.account.balances.aguru;\n  });\n\n  const pendingTransactions = useSelector(state => {\n    return state.pendingTransactions;\n  });\n\n  const onSeekApproval = async token => {\n    await dispatch(changeApproval({ address, token, provider, networkID: chainID }));\n  };\n\n  const onExchange = async () => {\n    // eslint-disable-next-line no-restricted-globals\n    if (isNaN(aguruBalance) || aguruBalance <= 0 || aguruBalance === \"\") {\n      // eslint-disable-next-line no-alert\n      return dispatch(error(\"You do not have any aOX to convert to OX\"));\n    }\n\n    await dispatch(exchangeAOX({ address, aguruBalance, provider, networkID: chainID }));\n  };\n\n  const hasAllowance = useCallback(\n    token => {\n      if (token === \"aguru\") return aguruAllowance > 0;\n      return 0;\n    },\n    [aguruAllowance],\n  );\n\n  const isAllowanceDataLoading = aguruAllowance == null;\n\n  let modalButton = [];\n\n  modalButton.push(<ConnectButton />);\n\n  return (\n    <div id=\"stake-view\" className=\"stake-metrics\">\n      <Zoom in={true} onEntered={() => setZoomed(true)}>\n        <Paper className={`ohm-card`}>\n          <Grid container direction=\"column\" spacing={2}>\n            <Grid item>\n              <div className=\"card-header\">\n                <Typography variant=\"h5\">Exchange aOX for OX</Typography>\n              </div>\n            </Grid>\n\n            <div className=\"staking-area\">\n              {!address ? (\n                <div className=\"stake-wallet-notification\">\n                  <div className=\"wallet-menu\" id=\"wallet-menu\">\n                    {modalButton}\n                  </div>\n                  <Typography color=\"textSecondary\" variant=\"h6\">\n                    Connect your wallet to exchange aOX for OX\n                  </Typography>\n                </div>\n              ) : (\n                <>\n                  <Box className=\"stake-action-area\">\n                    <Box className=\"stake-action-row \" display=\"flex\" alignItems=\"center\">\n                      {address && !isAllowanceDataLoading ? (\n                        !hasAllowance(\"aguru\") && (\n                          <Box className=\"help-text\">\n                            <Typography variant=\"body1\" className=\"stake-note\" color=\"textSecondary\">\n                              <>\n                                First time exchanging <b>aOX</b>?\n                                <br />\n                                Please approve AlphaDAO to exchange your <b>aOX</b> for <b>OX</b>.\n                              </>\n                            </Typography>\n                          </Box>\n                        )\n                      ) : (\n                        <Skeleton width=\"150px\" />\n                      )}\n\n                      <TabPanel value={view} index={0} className=\"stake-tab-panel\">\n                        {isAllowanceDataLoading ? (\n                          <Skeleton />\n                        ) : address && hasAllowance(\"aguru\") ? (\n                          <Button\n                            className=\"stake-button\"\n                            variant=\"contained\"\n                            color=\"primary\"\n                            disabled={isPendingTxn(pendingTransactions, \"claiming\")}\n                            onClick={() => {\n                              onExchange();\n                            }}\n                          >\n                            {txnButtonText(pendingTransactions, \"claiming\", \"Exchange aOX\")}\n                          </Button>\n                        ) : (\n                          <Button\n                            className=\"stake-button\"\n                            variant=\"contained\"\n                            color=\"primary\"\n                            disabled={isPendingTxn(pendingTransactions, \"approve_claiming\")}\n                            onClick={() => {\n                              console.log(\"clicked\");\n                              onSeekApproval(\"aguru\");\n                            }}\n                          >\n                            {txnButtonText(pendingTransactions, \"approve_claiming\", \"Approve\")}\n                          </Button>\n                        )}\n                      </TabPanel>\n                    </Box>\n                  </Box>\n\n                  <div className={`stake-user-data`}>\n                    <div className=\"data-row\">\n                      <Typography variant=\"body1\">Your Balance</Typography>\n                      <Typography variant=\"body1\">\n                        {isAppLoading ? <Skeleton width=\"80px\" /> : <>{trim(ohmBalance, 4)} OX</>}\n                      </Typography>\n                    </div>\n\n                    <div className=\"data-row\">\n                      <Typography variant=\"body1\">Amount to Exchange</Typography>\n                      <Typography variant=\"body1\">\n                        {isAppLoading ? <Skeleton width=\"80px\" /> : <>{trim(aguruBalance, 0)} aOX</>}\n                      </Typography>\n                    </div>\n                  </div>\n                </>\n              )}\n            </div>\n          </Grid>\n        </Paper>\n      </Zoom>\n    </div>\n  );\n}\n\nexport default EarlyClaim;\n"]},"metadata":{},"sourceType":"module"}