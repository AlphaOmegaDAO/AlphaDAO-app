{"ast":null,"code":"var _jsxFileName = \"C:\\\\arete\\\\AlphaDAO-react\\\\src\\\\views\\\\Wrap\\\\Wrap.jsx\",\n    _s = $RefreshSig$();\n\nimport { useCallback, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Box, Button, FormControl, Grid, InputAdornment, InputLabel, Link, OutlinedInput, Paper, Tab, Tabs, Typography, Zoom, SvgIcon } from \"@material-ui/core\";\nimport TabPanel from \"../../components/TabPanel\";\nimport InfoTooltip from \"../../components/InfoTooltip/InfoTooltip.jsx\";\nimport { ReactComponent as InfoIcon } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/icons/info-fill.svg\";\nimport { getOhmTokenImage, getTokenImage, trim, formatCurrency } from \"../../helpers\";\nimport { changeApproval, changeWrap } from \"../../slices/WrapThunk\";\nimport \"../Stake/stake.scss\";\nimport { useWeb3Context } from \"src/hooks/web3Context\";\nimport { isPendingTxn, txnButtonText } from \"src/slices/PendingTxnsSlice\";\nimport { Skeleton } from \"@material-ui/lab\";\nimport { error } from \"../../slices/MessagesSlice\";\nimport { ethers } from \"ethers\";\nimport ConnectButton from \"../../components/ConnectButton\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction a11yProps(index) {\n  return {\n    id: `simple-tab-${index}`,\n    \"aria-controls\": `simple-tabpanel-${index}`\n  };\n}\n\nconst sOhmImg = getTokenImage(\"sohm\");\nconst ohmImg = getOhmTokenImage(16, 16);\n\nfunction Wrap() {\n  _s();\n\n  const dispatch = useDispatch();\n  const {\n    provider,\n    address,\n    connected,\n    connect,\n    chainID\n  } = useWeb3Context();\n  const [zoomed, setZoomed] = useState(false);\n  const [view, setView] = useState(0);\n  const [quantity, setQuantity] = useState(\"\");\n  const isAppLoading = useSelector(state => state.app.loading);\n  const currentIndex = useSelector(state => {\n    return state.app.currentIndex;\n  });\n  const sOhmPrice = useSelector(state => {\n    return state.app.marketPrice;\n  });\n  const wsOhmPrice = useSelector(state => {\n    return state.app.marketPrice * state.app.currentIndex;\n  });\n  const sohmBalance = useSelector(state => {\n    return state.account.balances && state.account.balances.sohm;\n  });\n  const wsohmBalance = useSelector(state => {\n    return state.account.balances && state.account.balances.wsohm;\n  });\n  const wrapAllowance = useSelector(state => {\n    return state.account.wrapping && state.account.wrapping.ohmWrap;\n  });\n  const unwrapAllowance = useSelector(state => {\n    return state.account.wrapping && state.account.wrapping.ohmUnwrap;\n  });\n  const pendingTransactions = useSelector(state => {\n    return state.pendingTransactions;\n  });\n\n  const setMax = () => {\n    if (view === 0) {\n      setQuantity(sohmBalance);\n    } else {\n      setQuantity(wsohmBalance);\n    }\n  };\n\n  const onSeekApproval = async token => {\n    await dispatch(changeApproval({\n      address,\n      token,\n      provider,\n      networkID: chainID\n    }));\n  };\n\n  const onChangeWrap = async action => {\n    // eslint-disable-next-line no-restricted-globals\n    if (isNaN(quantity) || Number(quantity) === 0 || quantity === \"\") {\n      // eslint-disable-next-line no-alert\n      return dispatch(error(\"Please enter a value!\"));\n    } // 1st catch if quantity > balance\n\n\n    if (action === \"wrap\" && ethers.utils.parseUnits(quantity, \"gwei\").gt(ethers.utils.parseUnits(sohmBalance, \"gwei\"))) {\n      return dispatch(error(\"You cannot wrap more than your sOHM balance.\"));\n    }\n\n    if (action === \"unwrap\" && ethers.utils.parseUnits(quantity, \"ether\").gt(ethers.utils.parseUnits(wsohmBalance, \"ether\"))) {\n      return dispatch(error(\"You cannot unwrap more than your wsOHM balance.\"));\n    }\n\n    await dispatch(changeWrap({\n      address,\n      action,\n      value: quantity.toString(),\n      provider,\n      networkID: chainID\n    }));\n  };\n\n  const hasAllowance = useCallback(token => {\n    if (token === \"sohm\") return wrapAllowance > 0;\n    if (token === \"wsohm\") return wrapAllowance > 0;\n    return 0;\n  }, [wrapAllowance, unwrapAllowance]);\n  const isAllowanceDataLoading = wrapAllowance == null && view === 0 || unwrapAllowance == null && view === 1;\n  let modalButton = [];\n  modalButton.push( /*#__PURE__*/_jsxDEV(ConnectButton, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 130,\n    columnNumber: 20\n  }, this));\n\n  const changeView = (event, newView) => {\n    setView(newView);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"stake-view\",\n    children: /*#__PURE__*/_jsxDEV(Zoom, {\n      in: true,\n      onEntered: () => setZoomed(true),\n      children: /*#__PURE__*/_jsxDEV(Paper, {\n        className: `ohm-card`,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          direction: \"column\",\n          spacing: 2,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-header\",\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h5\",\n                children: \"Wrap / Unwrap\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                className: \"migrate-sohm-button\",\n                style: {\n                  textDecoration: \"none\"\n                },\n                href: \"https://docs.olympusdao.finance/main/contracts/tokens#wsohm\",\n                \"aria-label\": \"wsohm-wut\",\n                target: \"_blank\",\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  children: \"wsOX\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 151,\n                  columnNumber: 19\n                }, this), \" \", /*#__PURE__*/_jsxDEV(SvgIcon, {\n                  component: InfoIcon,\n                  color: \"primary\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 151,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stake-top-metrics\",\n              children: /*#__PURE__*/_jsxDEV(Grid, {\n                container: true,\n                spacing: 2,\n                alignItems: \"flex-end\",\n                children: [/*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 12,\n                  sm: 4,\n                  md: 4,\n                  lg: 4,\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"wrap-sOHM\",\n                    children: [/*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"h5\",\n                      color: \"textSecondary\",\n                      children: \"sOX Price\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 161,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"h4\",\n                      children: sOhmPrice ? formatCurrency(sOhmPrice, 2) : /*#__PURE__*/_jsxDEV(Skeleton, {\n                        width: \"150px\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 165,\n                        columnNumber: 69\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 164,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 160,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 159,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 12,\n                  sm: 4,\n                  md: 4,\n                  lg: 4,\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"wrap-index\",\n                    children: [/*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"h5\",\n                      color: \"textSecondary\",\n                      children: \"Current Index\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 171,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"h4\",\n                      children: currentIndex ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [trim(currentIndex, 1), \" sOX\"]\n                      }, void 0, true) : /*#__PURE__*/_jsxDEV(Skeleton, {\n                        width: \"150px\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 175,\n                        columnNumber: 76\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 174,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 170,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 169,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 12,\n                  sm: 4,\n                  md: 4,\n                  lg: 4,\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"wrap-wsOHM\",\n                    children: [/*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"h5\",\n                      color: \"textSecondary\",\n                      children: [\"wsOX Price\", /*#__PURE__*/_jsxDEV(InfoTooltip, {\n                        message: \"wsOX= sOX * index\\n\\nThe price of wsOX is equal to the price of OX multiplied by the current index\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 183,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 181,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"h4\",\n                      children: wsOhmPrice ? formatCurrency(wsOhmPrice, 2) : /*#__PURE__*/_jsxDEV(Skeleton, {\n                        width: \"150px\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 190,\n                        columnNumber: 71\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 189,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 180,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 179,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"staking-area\",\n            children: !address ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stake-wallet-notification\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"wallet-menu\",\n                id: \"wallet-menu\",\n                children: modalButton\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h6\",\n                children: \"Connect your wallet to wrap sOHM\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Box, {\n                className: \"stake-action-area\",\n                children: [/*#__PURE__*/_jsxDEV(Tabs, {\n                  centered: true,\n                  value: view,\n                  textColor: \"primary\",\n                  indicatorColor: \"primary\",\n                  className: \"stake-tab-buttons\",\n                  onChange: changeView,\n                  \"aria-label\": \"stake tabs\",\n                  children: [/*#__PURE__*/_jsxDEV(Tab, {\n                    label: \"Wrap\",\n                    ...a11yProps(0)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 219,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Tab, {\n                    label: \"Unwrap\",\n                    ...a11yProps(1)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 220,\n                    columnNumber: 23\n                  }, this)]\n                }, String(zoomed), true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Box, {\n                  className: \"stake-action-row \",\n                  display: \"flex\",\n                  alignItems: \"center\",\n                  children: [address && !isAllowanceDataLoading ? !hasAllowance(\"sohm\") && view === 0 ? /*#__PURE__*/_jsxDEV(Box, {\n                    className: \"help-text\",\n                    children: /*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"body1\",\n                      align: \"left\",\n                      className: \"stake-note\",\n                      color: \"textSecondary\",\n                      children: view === 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [\"First time wrapping \", /*#__PURE__*/_jsxDEV(\"b\", {\n                          children: \"sOX\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 229,\n                          columnNumber: 55\n                        }, this), \"?\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 230,\n                          columnNumber: 35\n                        }, this), \"Please approve Alpha to use your \", /*#__PURE__*/_jsxDEV(\"b\", {\n                          children: \"sOX\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 231,\n                          columnNumber: 68\n                        }, this), \" for wrapping.\"]\n                      }, void 0, true)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 226,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 225,\n                    columnNumber: 27\n                  }, this) : /*#__PURE__*/_jsxDEV(FormControl, {\n                    className: \"ohm-input\",\n                    variant: \"outlined\",\n                    color: \"primary\",\n                    children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                      htmlFor: \"amount-input\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 238,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(OutlinedInput, {\n                      id: \"amount-input\",\n                      type: \"number\",\n                      placeholder: \"Enter an amount\",\n                      className: \"stake-input\",\n                      value: quantity,\n                      onChange: e => setQuantity(e.target.value),\n                      labelWidth: 0,\n                      endAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                        position: \"end\",\n                        children: /*#__PURE__*/_jsxDEV(Button, {\n                          variant: \"text\",\n                          onClick: setMax,\n                          color: \"inherit\",\n                          children: \"Max\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 249,\n                          columnNumber: 35\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 248,\n                        columnNumber: 33\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 239,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 237,\n                    columnNumber: 27\n                  }, this) : /*#__PURE__*/_jsxDEV(Skeleton, {\n                    width: \"150px\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 258,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n                    value: view,\n                    index: 0,\n                    className: \"stake-tab-panel\",\n                    children: address && hasAllowance(\"sohm\") ? /*#__PURE__*/_jsxDEV(Button, {\n                      className: \"stake-button\",\n                      variant: \"contained\",\n                      color: \"primary\",\n                      disabled: isPendingTxn(pendingTransactions, \"wrapping\"),\n                      onClick: () => {\n                        onChangeWrap(\"wrap\");\n                      },\n                      children: txnButtonText(pendingTransactions, \"wrapping\", \"Wrap sOHM\")\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 263,\n                      columnNumber: 27\n                    }, this) : /*#__PURE__*/_jsxDEV(Button, {\n                      className: \"stake-button\",\n                      variant: \"contained\",\n                      color: \"primary\",\n                      disabled: isPendingTxn(pendingTransactions, \"approve_wrapping\"),\n                      onClick: () => {\n                        onSeekApproval(\"sohm\");\n                      },\n                      children: txnButtonText(pendingTransactions, \"approve_wrapping\", \"Approve\")\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 275,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 261,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n                    value: view,\n                    index: 1,\n                    className: \"stake-tab-panel\",\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      className: \"stake-button\",\n                      variant: \"contained\",\n                      color: \"primary\",\n                      disabled: isPendingTxn(pendingTransactions, \"unwrapping\"),\n                      onClick: () => {\n                        onChangeWrap(\"unwrap\");\n                      },\n                      children: txnButtonText(pendingTransactions, \"unwrapping\", \"Unwrap sOHM\")\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 290,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 289,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 222,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `stake-user-data`,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"data-row\",\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body1\",\n                    children: \"Wrappable Balance\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 307,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body1\",\n                    children: isAppLoading ? /*#__PURE__*/_jsxDEV(Skeleton, {\n                      width: \"80px\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 309,\n                      columnNumber: 41\n                    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [trim(sohmBalance, 4), \" sOHM\"]\n                    }, void 0, true)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 308,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 306,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"data-row\",\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body1\",\n                    children: \"Unwrappable Balance\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 313,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body1\",\n                    children: isAppLoading ? /*#__PURE__*/_jsxDEV(Skeleton, {\n                      width: \"80px\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 315,\n                      columnNumber: 41\n                    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [trim(wsohmBalance, 4), \" wsOHM\"]\n                    }, void 0, true)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 314,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 312,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 137,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Wrap, \"R+h7APmQEK20B0A/KKmC74QbqsQ=\", false, function () {\n  return [useDispatch, useWeb3Context, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = Wrap;\nexport default Wrap;\n\nvar _c;\n\n$RefreshReg$(_c, \"Wrap\");","map":{"version":3,"sources":["C:/arete/AlphaDAO-react/src/views/Wrap/Wrap.jsx"],"names":["useCallback","useState","useDispatch","useSelector","Box","Button","FormControl","Grid","InputAdornment","InputLabel","Link","OutlinedInput","Paper","Tab","Tabs","Typography","Zoom","SvgIcon","TabPanel","InfoTooltip","getOhmTokenImage","getTokenImage","trim","formatCurrency","changeApproval","changeWrap","useWeb3Context","isPendingTxn","txnButtonText","Skeleton","error","ethers","ConnectButton","a11yProps","index","id","sOhmImg","ohmImg","Wrap","dispatch","provider","address","connected","connect","chainID","zoomed","setZoomed","view","setView","quantity","setQuantity","isAppLoading","state","app","loading","currentIndex","sOhmPrice","marketPrice","wsOhmPrice","sohmBalance","account","balances","sohm","wsohmBalance","wsohm","wrapAllowance","wrapping","ohmWrap","unwrapAllowance","ohmUnwrap","pendingTransactions","setMax","onSeekApproval","token","networkID","onChangeWrap","action","isNaN","Number","utils","parseUnits","gt","value","toString","hasAllowance","isAllowanceDataLoading","modalButton","push","changeView","event","newView","textDecoration","InfoIcon","String","e","target"],"mappings":"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","sourcesContent":["import { useCallback, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  Box,\n  Button,\n  FormControl,\n  Grid,\n  InputAdornment,\n  InputLabel,\n  Link,\n  OutlinedInput,\n  Paper,\n  Tab,\n  Tabs,\n  Typography,\n  Zoom,\n  SvgIcon,\n} from \"@material-ui/core\";\nimport TabPanel from \"../../components/TabPanel\";\nimport InfoTooltip from \"../../components/InfoTooltip/InfoTooltip.jsx\";\nimport { ReactComponent as InfoIcon } from \"../../assets/icons/info-fill.svg\";\nimport { getOhmTokenImage, getTokenImage, trim, formatCurrency } from \"../../helpers\";\nimport { changeApproval, changeWrap } from \"../../slices/WrapThunk\";\nimport \"../Stake/stake.scss\";\nimport { useWeb3Context } from \"src/hooks/web3Context\";\nimport { isPendingTxn, txnButtonText } from \"src/slices/PendingTxnsSlice\";\nimport { Skeleton } from \"@material-ui/lab\";\nimport { error } from \"../../slices/MessagesSlice\";\nimport { ethers } from \"ethers\";\nimport ConnectButton from \"../../components/ConnectButton\";\n\nfunction a11yProps(index) {\n  return {\n    id: `simple-tab-${index}`,\n    \"aria-controls\": `simple-tabpanel-${index}`,\n  };\n}\n\nconst sOhmImg = getTokenImage(\"sohm\");\nconst ohmImg = getOhmTokenImage(16, 16);\n\nfunction Wrap() {\n  const dispatch = useDispatch();\n  const { provider, address, connected, connect, chainID } = useWeb3Context();\n\n  const [zoomed, setZoomed] = useState(false);\n  const [view, setView] = useState(0);\n  const [quantity, setQuantity] = useState(\"\");\n\n  const isAppLoading = useSelector(state => state.app.loading);\n  const currentIndex = useSelector(state => {\n    return state.app.currentIndex;\n  });\n\n  const sOhmPrice = useSelector(state => {\n    return state.app.marketPrice;\n  });\n\n  const wsOhmPrice = useSelector(state => {\n    return state.app.marketPrice * state.app.currentIndex;\n  });\n\n  const sohmBalance = useSelector(state => {\n    return state.account.balances && state.account.balances.sohm;\n  });\n  const wsohmBalance = useSelector(state => {\n    return state.account.balances && state.account.balances.wsohm;\n  });\n  const wrapAllowance = useSelector(state => {\n    return state.account.wrapping && state.account.wrapping.ohmWrap;\n  });\n  const unwrapAllowance = useSelector(state => {\n    return state.account.wrapping && state.account.wrapping.ohmUnwrap;\n  });\n\n  const pendingTransactions = useSelector(state => {\n    return state.pendingTransactions;\n  });\n\n  const setMax = () => {\n    if (view === 0) {\n      setQuantity(sohmBalance);\n    } else {\n      setQuantity(wsohmBalance);\n    }\n  };\n\n  const onSeekApproval = async token => {\n    await dispatch(changeApproval({ address, token, provider, networkID: chainID }));\n  };\n\n  const onChangeWrap = async action => {\n    // eslint-disable-next-line no-restricted-globals\n    if (isNaN(quantity) || Number(quantity) === 0 || quantity === \"\") {\n      // eslint-disable-next-line no-alert\n      return dispatch(error(\"Please enter a value!\"));\n    }\n\n    // 1st catch if quantity > balance\n    if (\n      action === \"wrap\" &&\n      ethers.utils.parseUnits(quantity, \"gwei\").gt(ethers.utils.parseUnits(sohmBalance, \"gwei\"))\n    ) {\n      return dispatch(error(\"You cannot wrap more than your sOHM balance.\"));\n    }\n\n    if (\n      action === \"unwrap\" &&\n      ethers.utils.parseUnits(quantity, \"ether\").gt(ethers.utils.parseUnits(wsohmBalance, \"ether\"))\n    ) {\n      return dispatch(error(\"You cannot unwrap more than your wsOHM balance.\"));\n    }\n\n    await dispatch(changeWrap({ address, action, value: quantity.toString(), provider, networkID: chainID }));\n  };\n\n  const hasAllowance = useCallback(\n    token => {\n      if (token === \"sohm\") return wrapAllowance > 0;\n      if (token === \"wsohm\") return wrapAllowance > 0;\n      return 0;\n    },\n    [wrapAllowance, unwrapAllowance],\n  );\n\n  const isAllowanceDataLoading = (wrapAllowance == null && view === 0) || (unwrapAllowance == null && view === 1);\n\n  let modalButton = [];\n\n  modalButton.push(<ConnectButton />);\n\n  const changeView = (event, newView) => {\n    setView(newView);\n  };\n\n  return (\n    <div id=\"stake-view\">\n      <Zoom in={true} onEntered={() => setZoomed(true)}>\n        <Paper className={`ohm-card`}>\n          <Grid container direction=\"column\" spacing={2}>\n            <Grid item>\n              <div className=\"card-header\">\n                <Typography variant=\"h5\">Wrap / Unwrap</Typography>\n                <Link\n                  className=\"migrate-sohm-button\"\n                  style={{ textDecoration: \"none\" }}\n                  href=\"https://docs.olympusdao.finance/main/contracts/tokens#wsohm\"\n                  aria-label=\"wsohm-wut\"\n                  target=\"_blank\"\n                >\n                  <Typography>wsOX</Typography> <SvgIcon component={InfoIcon} color=\"primary\" />\n                </Link>\n              </div>\n            </Grid>\n\n            <Grid item>\n              <div className=\"stake-top-metrics\">\n                <Grid container spacing={2} alignItems=\"flex-end\">\n                  <Grid item xs={12} sm={4} md={4} lg={4}>\n                    <div className=\"wrap-sOHM\">\n                      <Typography variant=\"h5\" color=\"textSecondary\">\n                        sOX Price\n                      </Typography>\n                      <Typography variant=\"h4\">\n                        {sOhmPrice ? formatCurrency(sOhmPrice, 2) : <Skeleton width=\"150px\" />}\n                      </Typography>\n                    </div>\n                  </Grid>\n                  <Grid item xs={12} sm={4} md={4} lg={4}>\n                    <div className=\"wrap-index\">\n                      <Typography variant=\"h5\" color=\"textSecondary\">\n                        Current Index\n                      </Typography>\n                      <Typography variant=\"h4\">\n                        {currentIndex ? <>{trim(currentIndex, 1)} sOX</> : <Skeleton width=\"150px\" />}\n                      </Typography>\n                    </div>\n                  </Grid>\n                  <Grid item xs={12} sm={4} md={4} lg={4}>\n                    <div className=\"wrap-wsOHM\">\n                      <Typography variant=\"h5\" color=\"textSecondary\">\n                        wsOX Price\n                        <InfoTooltip\n                          message={\n                            \"wsOX= sOX * index\\n\\nThe price of wsOX is equal to the price of OX multiplied by the current index\"\n                          }\n                        />\n                      </Typography>\n                      <Typography variant=\"h4\">\n                        {wsOhmPrice ? formatCurrency(wsOhmPrice, 2) : <Skeleton width=\"150px\" />}\n                      </Typography>\n                    </div>\n                  </Grid>\n                </Grid>\n              </div>\n            </Grid>\n\n            <div className=\"staking-area\">\n              {!address ? (\n                <div className=\"stake-wallet-notification\">\n                  <div className=\"wallet-menu\" id=\"wallet-menu\">\n                    {modalButton}\n                  </div>\n                  <Typography variant=\"h6\">Connect your wallet to wrap sOHM</Typography>\n                </div>\n              ) : (\n                <>\n                  <Box className=\"stake-action-area\">\n                    <Tabs\n                      key={String(zoomed)}\n                      centered\n                      value={view}\n                      textColor=\"primary\"\n                      indicatorColor=\"primary\"\n                      className=\"stake-tab-buttons\"\n                      onChange={changeView}\n                      aria-label=\"stake tabs\"\n                    >\n                      <Tab label=\"Wrap\" {...a11yProps(0)} />\n                      <Tab label=\"Unwrap\" {...a11yProps(1)} />\n                    </Tabs>\n                    <Box className=\"stake-action-row \" display=\"flex\" alignItems=\"center\">\n                      {address && !isAllowanceDataLoading ? (\n                        !hasAllowance(\"sohm\") && view === 0 ? (\n                          <Box className=\"help-text\">\n                            <Typography variant=\"body1\" align=\"left\" className=\"stake-note\" color=\"textSecondary\">\n                              {view === 0 && (\n                                <>\n                                  First time wrapping <b>sOX</b>?\n                                  <br />\n                                  Please approve Alpha to use your <b>sOX</b> for wrapping.\n                                </>\n                              )}\n                            </Typography>\n                          </Box>\n                        ) : (\n                          <FormControl className=\"ohm-input\" variant=\"outlined\" color=\"primary\">\n                            <InputLabel htmlFor=\"amount-input\"></InputLabel>\n                            <OutlinedInput\n                              id=\"amount-input\"\n                              type=\"number\"\n                              placeholder=\"Enter an amount\"\n                              className=\"stake-input\"\n                              value={quantity}\n                              onChange={e => setQuantity(e.target.value)}\n                              labelWidth={0}\n                              endAdornment={\n                                <InputAdornment position=\"end\">\n                                  <Button variant=\"text\" onClick={setMax} color=\"inherit\">\n                                    Max\n                                  </Button>\n                                </InputAdornment>\n                              }\n                            />\n                          </FormControl>\n                        )\n                      ) : (\n                        <Skeleton width=\"150px\" />\n                      )}\n\n                      <TabPanel value={view} index={0} className=\"stake-tab-panel\">\n                        {address && hasAllowance(\"sohm\") ? (\n                          <Button\n                            className=\"stake-button\"\n                            variant=\"contained\"\n                            color=\"primary\"\n                            disabled={isPendingTxn(pendingTransactions, \"wrapping\")}\n                            onClick={() => {\n                              onChangeWrap(\"wrap\");\n                            }}\n                          >\n                            {txnButtonText(pendingTransactions, \"wrapping\", \"Wrap sOHM\")}\n                          </Button>\n                        ) : (\n                          <Button\n                            className=\"stake-button\"\n                            variant=\"contained\"\n                            color=\"primary\"\n                            disabled={isPendingTxn(pendingTransactions, \"approve_wrapping\")}\n                            onClick={() => {\n                              onSeekApproval(\"sohm\");\n                            }}\n                          >\n                            {txnButtonText(pendingTransactions, \"approve_wrapping\", \"Approve\")}\n                          </Button>\n                        )}\n                      </TabPanel>\n\n                      <TabPanel value={view} index={1} className=\"stake-tab-panel\">\n                        <Button\n                          className=\"stake-button\"\n                          variant=\"contained\"\n                          color=\"primary\"\n                          disabled={isPendingTxn(pendingTransactions, \"unwrapping\")}\n                          onClick={() => {\n                            onChangeWrap(\"unwrap\");\n                          }}\n                        >\n                          {txnButtonText(pendingTransactions, \"unwrapping\", \"Unwrap sOHM\")}\n                        </Button>\n                      </TabPanel>\n                    </Box>\n                  </Box>\n\n                  <div className={`stake-user-data`}>\n                    <div className=\"data-row\">\n                      <Typography variant=\"body1\">Wrappable Balance</Typography>\n                      <Typography variant=\"body1\">\n                        {isAppLoading ? <Skeleton width=\"80px\" /> : <>{trim(sohmBalance, 4)} sOHM</>}\n                      </Typography>\n                    </div>\n                    <div className=\"data-row\">\n                      <Typography variant=\"body1\">Unwrappable Balance</Typography>\n                      <Typography variant=\"body1\">\n                        {isAppLoading ? <Skeleton width=\"80px\" /> : <>{trim(wsohmBalance, 4)} wsOHM</>}\n                      </Typography>\n                    </div>\n                  </div>\n                </>\n              )}\n            </div>\n          </Grid>\n        </Paper>\n      </Zoom>\n    </div>\n  );\n}\n\nexport default Wrap;\n"]},"metadata":{},"sourceType":"module"}