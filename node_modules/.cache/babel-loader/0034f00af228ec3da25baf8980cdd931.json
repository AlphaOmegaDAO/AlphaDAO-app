{"ast":null,"code":"var _jsxFileName = \"C:\\\\arete\\\\AlphaDAO-react\\\\src\\\\App.jsx\",\n    _s = $RefreshSig$();\n\nimport { ThemeProvider } from \"@material-ui/core/styles\";\nimport { useEffect, useState, useCallback } from \"react\";\nimport { Route, Redirect, Switch, useLocation } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useMediaQuery } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport useTheme from \"./hooks/useTheme\";\nimport useBonds from \"./hooks/Bonds\";\nimport { useAddress, useWeb3Context } from \"./hooks/web3Context\";\nimport useSegmentAnalytics from \"./hooks/useSegmentAnalytics\";\nimport { segmentUA } from \"./helpers/userAnalyticHelpers\";\nimport { shouldTriggerSafetyCheck } from \"./helpers\";\nimport { calcBondDetails } from \"./slices/BondSlice\";\nimport { loadAppDetails } from \"./slices/AppSlice\";\nimport { loadAccountDetails, calculateUserBondDetails } from \"./slices/AccountSlice\";\nimport { info } from \"./slices/MessagesSlice\";\nimport { Stake, ChooseBond, Bond, Wrap, TreasuryDashboard, Claim } from \"./views\";\nimport Sidebar from \"./components/Sidebar/Sidebar.jsx\";\nimport TopBar from \"./components/TopBar/TopBar.jsx\";\nimport NavDrawer from \"./components/Sidebar/NavDrawer.jsx\";\nimport LoadingSplash from \"./components/Loading/LoadingSplash\";\nimport Messages from \"./components/Messages/Messages\";\nimport NotFound from \"./views/404/NotFound\";\nimport { dark as darkTheme } from \"./themes/dark.js\";\nimport { light as lightTheme } from \"./themes/light.js\";\nimport { girth as gTheme } from \"./themes/girth.js\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport \"./style.scss\"; // ðŸ˜¬ Sorry for all the console logging\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DEBUG = false; // ðŸ›° providers\n\nif (DEBUG) console.log(\"ðŸ“¡ Connecting to Mainnet Ethereum\"); // ðŸ”­ block explorer URL\n// const blockExplorer = targetNetwork.blockExplorer;\n\nconst drawerWidth = 280;\nconst transitionDuration = 969;\nconst useStyles = makeStyles(theme => ({\n  drawer: {\n    [theme.breakpoints.up(\"md\")]: {\n      width: drawerWidth,\n      flexShrink: 0\n    }\n  },\n  content: {\n    flexGrow: 1,\n    padding: theme.spacing(1),\n    transition: theme.transitions.create(\"margin\", {\n      easing: theme.transitions.easing.sharp,\n      duration: transitionDuration\n    }),\n    height: \"100%\",\n    overflow: \"auto\",\n    marginLeft: drawerWidth\n  },\n  contentShift: {\n    transition: theme.transitions.create(\"margin\", {\n      easing: theme.transitions.easing.easeOut,\n      duration: transitionDuration\n    }),\n    marginLeft: 0\n  },\n  // necessary for content to be below app bar\n  toolbar: theme.mixins.toolbar,\n  drawerPaper: {\n    width: drawerWidth\n  }\n}));\n\nfunction App() {\n  _s();\n\n  useSegmentAnalytics();\n  const dispatch = useDispatch();\n  const [theme, toggleTheme, mounted] = useTheme();\n  const location = useLocation();\n  const currentPath = location.pathname + location.search + location.hash;\n  const classes = useStyles();\n  const [isSidebarExpanded, setIsSidebarExpanded] = useState(false);\n  const [mobileOpen, setMobileOpen] = useState(false);\n  const isSmallerScreen = useMediaQuery(\"(max-width: 980px)\");\n  const isSmallScreen = useMediaQuery(\"(max-width: 600px)\");\n  const {\n    connect,\n    hasCachedProvider,\n    provider,\n    chainID,\n    connected,\n    uri\n  } = useWeb3Context();\n  const address = useAddress();\n  const [walletChecked, setWalletChecked] = useState(false);\n  const isAppLoading = useSelector(state => state.app.loading);\n  const isAppLoaded = useSelector(state => typeof state.app.marketPrice != \"undefined\"); // Hacky way of determining if we were able to load app Details.\n\n  const {\n    bonds,\n    realBonds\n  } = useBonds();\n\n  async function loadDetails(whichDetails) {\n    // NOTE (unbanksy): If you encounter the following error:\n    // Unhandled Rejection (Error): call revert exception (method=\"balanceOf(address)\", errorArgs=null, errorName=null, errorSignature=null, reason=null, code=CALL_EXCEPTION, version=abi/5.4.0)\n    // it's because the initial provider loaded always starts with chainID=1. This causes\n    // address lookup on the wrong chain which then throws the error. To properly resolve this,\n    // we shouldn't be initializing to chainID=1 in web3Context without first listening for the\n    // network. To actually test rinkeby, change setChainID equal to 4 before testing.\n    let loadProvider = provider;\n\n    if (whichDetails === \"app\") {\n      loadApp(loadProvider);\n    } // don't run unless provider is a Wallet...\n\n\n    if (whichDetails === \"account\" && address && connected) {\n      loadAccount(loadProvider);\n    }\n  }\n\n  const loadApp = useCallback(loadProvider => {\n    dispatch(loadAppDetails({\n      networkID: chainID,\n      provider: loadProvider\n    }));\n    bonds.map(bond => {\n      dispatch(calcBondDetails({\n        bond,\n        value: null,\n        provider: loadProvider,\n        networkID: chainID\n      }));\n    });\n  }, [connected]);\n  const loadAccount = useCallback(loadProvider => {\n    dispatch(loadAccountDetails({\n      networkID: chainID,\n      address,\n      provider: loadProvider\n    }));\n    bonds.map(bond => {\n      dispatch(calculateUserBondDetails({\n        address,\n        bond,\n        provider,\n        networkID: chainID\n      }));\n    });\n  }, [connected]); // The next 3 useEffects handle initializing API Loads AFTER wallet is checked\n  //\n  // this useEffect checks Wallet Connection & then sets State for reload...\n  // ... we don't try to fire Api Calls on initial load because web3Context is not set yet\n  // ... if we don't wait we'll ALWAYS fire API calls via JsonRpc because provider has not\n  // ... been reloaded within App.\n\n  useEffect(() => {\n    if (hasCachedProvider()) {\n      // then user DOES have a wallet\n      connect().then(() => {\n        setWalletChecked(true);\n        segmentUA({\n          type: \"connect\",\n          provider: provider,\n          context: currentPath\n        });\n      });\n    } else {\n      // then user DOES NOT have a wallet\n      setWalletChecked(true);\n    }\n\n    if (shouldTriggerSafetyCheck()) {\n      dispatch(info(\"Safety Check: Always verify you're on app.alphadao.finance!\"));\n    }\n  }, []); // this useEffect fires on state change from above. It will ALWAYS fire AFTER\n\n  useEffect(() => {\n    // don't load ANY details until wallet is Checked\n    if (walletChecked) {\n      loadDetails(\"app\");\n    }\n  }, [walletChecked]); // this useEffect picks up any time a user Connects via the button\n\n  useEffect(() => {\n    // don't load ANY details until wallet is Connected\n    if (connected) {\n      loadDetails(\"account\");\n    }\n  }, [connected]);\n\n  const handleDrawerToggle = () => {\n    setMobileOpen(!mobileOpen);\n  };\n\n  const handleSidebarClose = () => {\n    setIsSidebarExpanded(false);\n  };\n\n  let themeMode = theme === \"light\" ? lightTheme : theme === \"dark\" ? darkTheme : gTheme;\n  useEffect(() => {\n    themeMode = theme === \"light\" ? lightTheme : darkTheme;\n  }, [theme]);\n  useEffect(() => {\n    if (isSidebarExpanded) handleSidebarClose();\n  }, [location]);\n  return /*#__PURE__*/_jsxDEV(ThemeProvider, {\n    theme: themeMode,\n    children: [/*#__PURE__*/_jsxDEV(CssBaseline, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `app ${isSmallerScreen && \"tablet\"} ${isSmallScreen && \"mobile\"} ${theme}`,\n      children: [/*#__PURE__*/_jsxDEV(Messages, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TopBar, {\n        theme: theme,\n        toggleTheme: toggleTheme,\n        handleDrawerToggle: handleDrawerToggle\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n        className: classes.drawer,\n        children: isSmallerScreen ? /*#__PURE__*/_jsxDEV(NavDrawer, {\n          mobileOpen: mobileOpen,\n          handleDrawerToggle: handleDrawerToggle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Sidebar, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `${classes.content} ${isSmallerScreen && classes.contentShift}`,\n        children: /*#__PURE__*/_jsxDEV(Switch, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/dashboard\",\n            children: /*#__PURE__*/_jsxDEV(TreasuryDashboard, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/\",\n            children: /*#__PURE__*/_jsxDEV(Redirect, {\n              to: \"/dashboard\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/stake\",\n            children: /*#__PURE__*/_jsxDEV(Stake, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/bonds\",\n            children: [bonds.map(bond => {\n              return /*#__PURE__*/_jsxDEV(Route, {\n                exact: true,\n                path: `/bonds/${bond.name}`,\n                children: /*#__PURE__*/_jsxDEV(Bond, {\n                  bond: bond\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 236,\n                  columnNumber: 21\n                }, this)\n              }, bond.name, false, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 19\n              }, this);\n            }), realBonds && realBonds.map(bond => {\n              return /*#__PURE__*/_jsxDEV(Route, {\n                exact: true,\n                path: `/bonds/${bond.name}`,\n                children: /*#__PURE__*/_jsxDEV(Bond, {\n                  bond: bond,\n                  nft: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 244,\n                  columnNumber: 23\n                }, this)\n              }, bond.name, false, {\n                fileName: _jsxFileName,\n                lineNumber: 243,\n                columnNumber: 21\n              }, this);\n            }), /*#__PURE__*/_jsxDEV(ChooseBond, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            component: NotFound\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 196,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"hs5CSbe2HFh9v8s0i8NWb8JMFXg=\", false, function () {\n  return [useSegmentAnalytics, useDispatch, useTheme, useLocation, useStyles, useMediaQuery, useMediaQuery, useWeb3Context, useAddress, useSelector, useSelector, useBonds];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/arete/AlphaDAO-react/src/App.jsx"],"names":["ThemeProvider","useEffect","useState","useCallback","Route","Redirect","Switch","useLocation","useDispatch","useSelector","useMediaQuery","makeStyles","CssBaseline","useTheme","useBonds","useAddress","useWeb3Context","useSegmentAnalytics","segmentUA","shouldTriggerSafetyCheck","calcBondDetails","loadAppDetails","loadAccountDetails","calculateUserBondDetails","info","Stake","ChooseBond","Bond","Wrap","TreasuryDashboard","Claim","Sidebar","TopBar","NavDrawer","LoadingSplash","Messages","NotFound","dark","darkTheme","light","lightTheme","girth","gTheme","v4","uuidv4","DEBUG","console","log","drawerWidth","transitionDuration","useStyles","theme","drawer","breakpoints","up","width","flexShrink","content","flexGrow","padding","spacing","transition","transitions","create","easing","sharp","duration","height","overflow","marginLeft","contentShift","easeOut","toolbar","mixins","drawerPaper","App","dispatch","toggleTheme","mounted","location","currentPath","pathname","search","hash","classes","isSidebarExpanded","setIsSidebarExpanded","mobileOpen","setMobileOpen","isSmallerScreen","isSmallScreen","connect","hasCachedProvider","provider","chainID","connected","uri","address","walletChecked","setWalletChecked","isAppLoading","state","app","loading","isAppLoaded","marketPrice","bonds","realBonds","loadDetails","whichDetails","loadProvider","loadApp","loadAccount","networkID","map","bond","value","then","type","context","handleDrawerToggle","handleSidebarClose","themeMode","name"],"mappings":"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","sourcesContent":["import { ThemeProvider } from \"@material-ui/core/styles\";\nimport { useEffect, useState, useCallback } from \"react\";\nimport { Route, Redirect, Switch, useLocation } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useMediaQuery } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport useTheme from \"./hooks/useTheme\";\nimport useBonds from \"./hooks/Bonds\";\nimport { useAddress, useWeb3Context } from \"./hooks/web3Context\";\nimport useSegmentAnalytics from \"./hooks/useSegmentAnalytics\";\nimport { segmentUA } from \"./helpers/userAnalyticHelpers\";\nimport { shouldTriggerSafetyCheck } from \"./helpers\";\n\nimport { calcBondDetails } from \"./slices/BondSlice\";\nimport { loadAppDetails } from \"./slices/AppSlice\";\nimport { loadAccountDetails, calculateUserBondDetails } from \"./slices/AccountSlice\";\nimport { info } from \"./slices/MessagesSlice\";\n\nimport { Stake, ChooseBond, Bond, Wrap, TreasuryDashboard, Claim } from \"./views\";\nimport Sidebar from \"./components/Sidebar/Sidebar.jsx\";\nimport TopBar from \"./components/TopBar/TopBar.jsx\";\nimport NavDrawer from \"./components/Sidebar/NavDrawer.jsx\";\nimport LoadingSplash from \"./components/Loading/LoadingSplash\";\nimport Messages from \"./components/Messages/Messages\";\nimport NotFound from \"./views/404/NotFound\";\n\nimport { dark as darkTheme } from \"./themes/dark.js\";\nimport { light as lightTheme } from \"./themes/light.js\";\nimport { girth as gTheme } from \"./themes/girth.js\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport \"./style.scss\";\n\n// ðŸ˜¬ Sorry for all the console logging\nconst DEBUG = false;\n\n// ðŸ›° providers\nif (DEBUG) console.log(\"ðŸ“¡ Connecting to Mainnet Ethereum\");\n// ðŸ”­ block explorer URL\n// const blockExplorer = targetNetwork.blockExplorer;\n\nconst drawerWidth = 280;\nconst transitionDuration = 969;\n\nconst useStyles = makeStyles(theme => ({\n  drawer: {\n    [theme.breakpoints.up(\"md\")]: {\n      width: drawerWidth,\n      flexShrink: 0,\n    },\n  },\n  content: {\n    flexGrow: 1,\n    padding: theme.spacing(1),\n    transition: theme.transitions.create(\"margin\", {\n      easing: theme.transitions.easing.sharp,\n      duration: transitionDuration,\n    }),\n    height: \"100%\",\n    overflow: \"auto\",\n    marginLeft: drawerWidth,\n  },\n  contentShift: {\n    transition: theme.transitions.create(\"margin\", {\n      easing: theme.transitions.easing.easeOut,\n      duration: transitionDuration,\n    }),\n    marginLeft: 0,\n  },\n  // necessary for content to be below app bar\n  toolbar: theme.mixins.toolbar,\n  drawerPaper: {\n    width: drawerWidth,\n  },\n}));\n\nfunction App() {\n  useSegmentAnalytics();\n  const dispatch = useDispatch();\n  const [theme, toggleTheme, mounted] = useTheme();\n  const location = useLocation();\n  const currentPath = location.pathname + location.search + location.hash;\n  const classes = useStyles();\n  const [isSidebarExpanded, setIsSidebarExpanded] = useState(false);\n  const [mobileOpen, setMobileOpen] = useState(false);\n  const isSmallerScreen = useMediaQuery(\"(max-width: 980px)\");\n  const isSmallScreen = useMediaQuery(\"(max-width: 600px)\");\n\n  const { connect, hasCachedProvider, provider, chainID, connected, uri } = useWeb3Context();\n  const address = useAddress();\n\n  const [walletChecked, setWalletChecked] = useState(false);\n\n  const isAppLoading = useSelector(state => state.app.loading);\n  const isAppLoaded = useSelector(state => typeof state.app.marketPrice != \"undefined\"); // Hacky way of determining if we were able to load app Details.\n  const { bonds, realBonds } = useBonds();\n  async function loadDetails(whichDetails) {\n    // NOTE (unbanksy): If you encounter the following error:\n    // Unhandled Rejection (Error): call revert exception (method=\"balanceOf(address)\", errorArgs=null, errorName=null, errorSignature=null, reason=null, code=CALL_EXCEPTION, version=abi/5.4.0)\n    // it's because the initial provider loaded always starts with chainID=1. This causes\n    // address lookup on the wrong chain which then throws the error. To properly resolve this,\n    // we shouldn't be initializing to chainID=1 in web3Context without first listening for the\n    // network. To actually test rinkeby, change setChainID equal to 4 before testing.\n    let loadProvider = provider;\n\n    if (whichDetails === \"app\") {\n      loadApp(loadProvider);\n    }\n\n    // don't run unless provider is a Wallet...\n    if (whichDetails === \"account\" && address && connected) {\n      loadAccount(loadProvider);\n    }\n  }\n\n  const loadApp = useCallback(\n    loadProvider => {\n      dispatch(loadAppDetails({ networkID: chainID, provider: loadProvider }));\n      bonds.map(bond => {\n        dispatch(calcBondDetails({ bond, value: null, provider: loadProvider, networkID: chainID }));\n      });\n    },\n    [connected],\n  );\n\n  const loadAccount = useCallback(\n    loadProvider => {\n      dispatch(loadAccountDetails({ networkID: chainID, address, provider: loadProvider }));\n      bonds.map(bond => {\n        dispatch(calculateUserBondDetails({ address, bond, provider, networkID: chainID }));\n      });\n    },\n    [connected],\n  );\n\n  // The next 3 useEffects handle initializing API Loads AFTER wallet is checked\n  //\n  // this useEffect checks Wallet Connection & then sets State for reload...\n  // ... we don't try to fire Api Calls on initial load because web3Context is not set yet\n  // ... if we don't wait we'll ALWAYS fire API calls via JsonRpc because provider has not\n  // ... been reloaded within App.\n  useEffect(() => {\n    if (hasCachedProvider()) {\n      // then user DOES have a wallet\n      connect().then(() => {\n        setWalletChecked(true);\n        segmentUA({\n          type: \"connect\",\n          provider: provider,\n          context: currentPath,\n        });\n      });\n    } else {\n      // then user DOES NOT have a wallet\n      setWalletChecked(true);\n    }\n    if (shouldTriggerSafetyCheck()) {\n      dispatch(info(\"Safety Check: Always verify you're on app.alphadao.finance!\"));\n    }\n  }, []);\n\n  // this useEffect fires on state change from above. It will ALWAYS fire AFTER\n  useEffect(() => {\n    // don't load ANY details until wallet is Checked\n    if (walletChecked) {\n      loadDetails(\"app\");\n    }\n  }, [walletChecked]);\n\n  // this useEffect picks up any time a user Connects via the button\n  useEffect(() => {\n    // don't load ANY details until wallet is Connected\n    if (connected) {\n      loadDetails(\"account\");\n    }\n  }, [connected]);\n\n  const handleDrawerToggle = () => {\n    setMobileOpen(!mobileOpen);\n  };\n\n  const handleSidebarClose = () => {\n    setIsSidebarExpanded(false);\n  };\n\n  let themeMode = theme === \"light\" ? lightTheme : theme === \"dark\" ? darkTheme : gTheme;\n  useEffect(() => {\n    themeMode = theme === \"light\" ? lightTheme : darkTheme;\n  }, [theme]);\n\n  useEffect(() => {\n    if (isSidebarExpanded) handleSidebarClose();\n  }, [location]);\n\n  return (\n    <ThemeProvider theme={themeMode}>\n      <CssBaseline />\n      {/* {isAppLoading && <LoadingSplash />} */}\n      <div className={`app ${isSmallerScreen && \"tablet\"} ${isSmallScreen && \"mobile\"} ${theme}`}>\n        <Messages />\n        <TopBar theme={theme} toggleTheme={toggleTheme} handleDrawerToggle={handleDrawerToggle} />\n        <nav className={classes.drawer}>\n          {isSmallerScreen ? (\n            <NavDrawer mobileOpen={mobileOpen} handleDrawerToggle={handleDrawerToggle} />\n          ) : (\n            <Sidebar />\n          )}\n        </nav>\n\n        <div className={`${classes.content} ${isSmallerScreen && classes.contentShift}`}>\n          <Switch>\n            <Route exact path=\"/dashboard\">\n              <TreasuryDashboard />\n            </Route>\n\n            {/*<Route exact path=\"/claim\">*/}\n            {/*  <Claim />*/}\n            {/*</Route>*/}\n\n            <Route exact path=\"/\">\n              <Redirect to=\"/dashboard\" />\n            </Route>\n\n            <Route path=\"/stake\">\n              <Stake />\n            </Route>\n\n            {/*<Route path=\"/wrap\">*/}\n            {/*  <Wrap />*/}\n            {/*</Route>*/}\n\n            <Route path=\"/bonds\">\n              {bonds.map(bond => {\n                return (\n                  <Route exact key={bond.name} path={`/bonds/${bond.name}`}>\n                    <Bond bond={bond} />\n                  </Route>\n                );\n              })}\n              {realBonds &&\n                realBonds.map(bond => {\n                  return (\n                    <Route exact key={bond.name} path={`/bonds/${bond.name}`}>\n                      <Bond bond={bond} nft />\n                    </Route>\n                  );\n                })}\n              <ChooseBond />\n            </Route>\n\n            <Route component={NotFound} />\n          </Switch>\n        </div>\n      </div>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}