{"ast":null,"code":"var _jsxFileName = \"C:\\\\arete\\\\AlphaDAO-react\\\\src\\\\views\\\\Stake\\\\Stake.jsx\",\n    _s = $RefreshSig$();\n\nimport { useCallback, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Box, Button, FormControl, Grid, InputAdornment, InputLabel, Link, OutlinedInput, Paper, SvgIcon, Tab, Tabs, Typography, Zoom } from \"@material-ui/core\";\nimport NewReleases from \"@material-ui/icons/NewReleases\";\nimport RebaseTimer from \"../../components/RebaseTimer/RebaseTimer\";\nimport TabPanel from \"../../components/TabPanel\";\nimport { getOhmTokenImage, getTokenImage, trim } from \"../../helpers\";\nimport { changeApproval, changeStake } from \"../../slices/StakeThunk\";\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\nimport \"./stake.scss\";\nimport { useWeb3Context } from \"src/hooks/web3Context\";\nimport { isPendingTxn, txnButtonText } from \"src/slices/PendingTxnsSlice\";\nimport { Skeleton } from \"@material-ui/lab\";\nimport ExternalStakePool from \"./ExternalStakePool\";\nimport { error } from \"../../slices/MessagesSlice\";\nimport { ethers } from \"ethers\";\nimport { ReactComponent as WalletIcon } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/icons/wallet.svg\";\nimport ConnectButton from \"../../components/ConnectButton\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction a11yProps(index) {\n  return {\n    id: `simple-tab-${index}`,\n    \"aria-controls\": `simple-tabpanel-${index}`\n  };\n}\n\nconst sOhmImg = getTokenImage(\"sohm\");\nconst ohmImg = getOhmTokenImage(16, 16);\n\nfunction Stake() {\n  _s();\n\n  const dispatch = useDispatch();\n  const {\n    provider,\n    address,\n    connected,\n    connect,\n    chainID\n  } = useWeb3Context();\n  const [zoomed, setZoomed] = useState(false);\n  const [view, setView] = useState(0);\n  const [quantity, setQuantity] = useState(\"\");\n  const isAppLoading = useSelector(state => state.app.loading);\n  const currentIndex = useSelector(state => {\n    return state.app.currentIndex;\n  });\n  const fiveDayRate = useSelector(state => {\n    return state.app.fiveDayRate;\n  });\n  const ohmBalance = useSelector(state => {\n    return state.account.balances && state.account.balances.ohm;\n  }); // const oldSohmBalance = useSelector(state => {\n  //   return state.account.balances && state.account.balances.oldsohm;\n  // });\n\n  const sohmBalance = useSelector(state => {\n    return state.account.balances && state.account.balances.sohm;\n  });\n  const fsohmBalance = useSelector(state => {\n    return state.account.balances && state.account.balances.fsohm;\n  });\n  const wsohmBalance = useSelector(state => {\n    return state.account.balances && state.account.balances.wsohm;\n  });\n  const stakeAllowance = useSelector(state => {\n    return state.account.staking && state.account.staking.ohmStake;\n  });\n  const unstakeAllowance = useSelector(state => {\n    return state.account.staking && state.account.staking.ohmUnstake;\n  });\n  const stakingRebase = useSelector(state => {\n    return state.app.stakingRebase;\n  });\n  const stakingAPY = useSelector(state => {\n    return state.app.stakingAPY;\n  });\n  const stakingTVL = useSelector(state => {\n    return state.app.stakingTVL;\n  });\n  const pendingTransactions = useSelector(state => {\n    return state.pendingTransactions;\n  });\n\n  const setMax = () => {\n    if (view === 0) {\n      setQuantity(ohmBalance);\n    } else {\n      setQuantity(sohmBalance);\n    }\n  };\n\n  const onSeekApproval = async token => {\n    await dispatch(changeApproval({\n      address,\n      token,\n      provider,\n      networkID: chainID\n    }));\n  };\n\n  const onChangeStake = async action => {\n    // eslint-disable-next-line no-restricted-globals\n    if (isNaN(quantity) || quantity === 0 || quantity === \"\") {\n      // eslint-disable-next-line no-alert\n      return dispatch(error(\"Please enter a value!\"));\n    } // 1st catch if quantity > balance\n\n\n    let gweiValue = ethers.utils.parseUnits(quantity, \"gwei\");\n\n    if (action === \"stake\" && gweiValue.gt(ethers.utils.parseUnits(ohmBalance, \"gwei\"))) {\n      return dispatch(error(\"You cannot stake more than your OX balance.\"));\n    }\n\n    if (action === \"unstake\" && gweiValue.gt(ethers.utils.parseUnits(sohmBalance, \"gwei\"))) {\n      return dispatch(error(\"You cannot unstake more than your sOX balance.\"));\n    }\n\n    await dispatch(changeStake({\n      address,\n      action,\n      value: quantity.toString(),\n      provider,\n      networkID: chainID\n    }));\n  };\n\n  const hasAllowance = useCallback(token => {\n    if (token === \"ohm\") return stakeAllowance > 0;\n    if (token === \"sohm\") return unstakeAllowance > 0;\n    return 0;\n  }, [stakeAllowance, unstakeAllowance]);\n  const isAllowanceDataLoading = stakeAllowance == null && view === 0 || unstakeAllowance == null && view === 1;\n  let modalButton = [];\n  modalButton.push( /*#__PURE__*/_jsxDEV(ConnectButton, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 140,\n    columnNumber: 20\n  }, this));\n\n  const changeView = (event, newView) => {\n    setView(newView);\n  };\n\n  const trimmedBalance = Number([sohmBalance, fsohmBalance, wsohmBalance].filter(Boolean).map(balance => Number(balance)).reduce((a, b) => a + b, 0).toFixed(4));\n  const trimmedStakingAPY = trim(stakingAPY * 100, 1);\n  const stakingRebasePercentage = trim(stakingRebase * 100, 4);\n  const nextRewardValue = trim(stakingRebasePercentage / 100 * trimmedBalance, 4);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"stake-view\",\n    className: \"stake-metrics\",\n    children: /*#__PURE__*/_jsxDEV(Zoom, {\n      in: true,\n      onEntered: () => setZoomed(true),\n      children: /*#__PURE__*/_jsxDEV(Paper, {\n        className: `ohm-card`,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          direction: \"column\",\n          spacing: 2,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-header\",\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h5\",\n                children: \"OX Staking (3,3)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(RebaseTimer, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stake-top-metrics\",\n              children: /*#__PURE__*/_jsxDEV(Grid, {\n                container: true,\n                spacing: 2,\n                alignItems: \"flex-end\",\n                children: /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 12,\n                  sm: 12,\n                  md: 12,\n                  lg: 12,\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"stake-apy\",\n                    children: [/*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"h6\",\n                      color: \"textSecondary\",\n                      children: \"APY\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 187,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"h4\",\n                      children: stakingAPY ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [new Intl.NumberFormat(\"en-US\").format(stakingAPY), \"%\"]\n                      }, void 0, true) : /*#__PURE__*/_jsxDEV(Skeleton, {\n                        width: \"150px\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 194,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 190,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 186,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 185,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stake-top-metrics\",\n              children: /*#__PURE__*/_jsxDEV(Grid, {\n                container: true,\n                spacing: 2,\n                alignItems: \"flex-end\",\n                children: [/*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 12,\n                  sm: 6,\n                  md: 6,\n                  lg: 6,\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"stake-tvl\",\n                    children: [/*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"h6\",\n                      color: \"textSecondary\",\n                      children: \"Total Value Deposited\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 208,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"h4\",\n                      children: stakingTVL ? new Intl.NumberFormat(\"en-US\", {\n                        style: \"currency\",\n                        currency: \"USD\",\n                        maximumFractionDigits: 0,\n                        minimumFractionDigits: 0\n                      }).format(stakingTVL) : /*#__PURE__*/_jsxDEV(Skeleton, {\n                        width: \"150px\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 220,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 211,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 207,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 12,\n                  sm: 6,\n                  md: 6,\n                  lg: 6,\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"stake-index\",\n                    children: [/*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"h6\",\n                      color: \"textSecondary\",\n                      children: \"Current Index\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 228,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"h4\",\n                      children: currentIndex ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [trim(currentIndex, 1), \" sOX\"]\n                      }, void 0, true) : /*#__PURE__*/_jsxDEV(Skeleton, {\n                        width: \"150px\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 232,\n                        columnNumber: 76\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 231,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 227,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 226,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 205,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"staking-area\",\n            children: !address ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stake-wallet-notification\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"wallet-menu\",\n                id: \"wallet-menu\",\n                children: modalButton\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 243,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                color: \"textSecondary\",\n                variant: \"h6\",\n                children: \"Connect your wallet to stake OX\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Box, {\n                className: \"stake-action-area\",\n                children: [/*#__PURE__*/_jsxDEV(Tabs, {\n                  centered: true,\n                  value: view,\n                  textColor: \"primary\",\n                  indicatorColor: \"primary\",\n                  className: \"stake-tab-buttons\",\n                  onChange: changeView,\n                  \"aria-label\": \"stake tabs\",\n                  children: [/*#__PURE__*/_jsxDEV(Tab, {\n                    label: \"STAKE\",\n                    ...a11yProps(0)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 263,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Tab, {\n                    label: \"UNSTAKE\",\n                    ...a11yProps(1)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 264,\n                    columnNumber: 23\n                  }, this)]\n                }, String(zoomed), true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 253,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Box, {\n                  className: \"stake-action-row \",\n                  display: \"flex\",\n                  alignItems: \"center\",\n                  children: [address && !isAllowanceDataLoading ? !hasAllowance(\"ohm\") && view === 0 || !hasAllowance(\"sohm\") && view === 1 ? /*#__PURE__*/_jsxDEV(Box, {\n                    className: \"help-text\",\n                    children: /*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"body1\",\n                      align: \"left\",\n                      className: \"stake-note\",\n                      color: \"textSecondary\",\n                      children: view === 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [\"First time staking \", /*#__PURE__*/_jsxDEV(\"b\", {\n                          children: \"OX\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 274,\n                          columnNumber: 54\n                        }, this), \"?\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 275,\n                          columnNumber: 35\n                        }, this), \"Please approve Alpha to use your \", /*#__PURE__*/_jsxDEV(\"b\", {\n                          children: \"OX\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 276,\n                          columnNumber: 68\n                        }, this), \" for staking.\"]\n                      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [\"First time unstaking \", /*#__PURE__*/_jsxDEV(\"b\", {\n                          children: \"sOX\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 280,\n                          columnNumber: 56\n                        }, this), \"?\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 281,\n                          columnNumber: 35\n                        }, this), \"Please approve Alpha to use your \", /*#__PURE__*/_jsxDEV(\"b\", {\n                          children: \"sOX\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 282,\n                          columnNumber: 68\n                        }, this), \" for unstaking.\"]\n                      }, void 0, true)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 271,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 270,\n                    columnNumber: 27\n                  }, this) : /*#__PURE__*/_jsxDEV(FormControl, {\n                    className: \"ohm-input\",\n                    variant: \"outlined\",\n                    color: \"primary\",\n                    children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                      htmlFor: \"amount-input\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 289,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(OutlinedInput, {\n                      id: \"amount-input\",\n                      type: \"number\",\n                      placeholder: \"Enter an amount\",\n                      className: \"stake-input\",\n                      value: quantity,\n                      onChange: e => setQuantity(e.target.value),\n                      labelWidth: 0,\n                      endAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                        position: \"end\",\n                        children: /*#__PURE__*/_jsxDEV(Button, {\n                          variant: \"text\",\n                          onClick: setMax,\n                          color: \"inherit\",\n                          children: \"Max\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 300,\n                          columnNumber: 35\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 299,\n                        columnNumber: 33\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 290,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 288,\n                    columnNumber: 27\n                  }, this) : /*#__PURE__*/_jsxDEV(Skeleton, {\n                    width: \"150px\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 309,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n                    value: view,\n                    index: 0,\n                    className: \"stake-tab-panel\",\n                    children: isAllowanceDataLoading ? /*#__PURE__*/_jsxDEV(Skeleton, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 314,\n                      columnNumber: 27\n                    }, this) : address && hasAllowance(\"ohm\") ? /*#__PURE__*/_jsxDEV(Button, {\n                      className: \"stake-button\",\n                      variant: \"contained\",\n                      color: \"primary\",\n                      disabled: isPendingTxn(pendingTransactions, \"staking\"),\n                      onClick: () => {\n                        onChangeStake(\"stake\");\n                      },\n                      children: txnButtonText(pendingTransactions, \"staking\", \"Stake OX\")\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 316,\n                      columnNumber: 27\n                    }, this) : /*#__PURE__*/_jsxDEV(Button, {\n                      className: \"stake-button\",\n                      variant: \"contained\",\n                      color: \"primary\",\n                      disabled: isPendingTxn(pendingTransactions, \"approve_staking\"),\n                      onClick: () => {\n                        onSeekApproval(\"ohm\");\n                      },\n                      children: txnButtonText(pendingTransactions, \"approve_staking\", \"Approve\")\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 328,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 312,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n                    value: view,\n                    index: 1,\n                    className: \"stake-tab-panel\",\n                    children: isAllowanceDataLoading ? /*#__PURE__*/_jsxDEV(Skeleton, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 343,\n                      columnNumber: 27\n                    }, this) : address && hasAllowance(\"sohm\") ? /*#__PURE__*/_jsxDEV(Button, {\n                      className: \"stake-button\",\n                      variant: \"contained\",\n                      color: \"primary\",\n                      disabled: isPendingTxn(pendingTransactions, \"unstaking\"),\n                      onClick: () => {\n                        onChangeStake(\"unstake\");\n                      },\n                      children: txnButtonText(pendingTransactions, \"unstaking\", \"Unstake OX\")\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 345,\n                      columnNumber: 27\n                    }, this) : /*#__PURE__*/_jsxDEV(Button, {\n                      className: \"stake-button\",\n                      variant: \"contained\",\n                      color: \"primary\",\n                      disabled: isPendingTxn(pendingTransactions, \"approve_unstaking\"),\n                      onClick: () => {\n                        onSeekApproval(\"sohm\");\n                      },\n                      children: txnButtonText(pendingTransactions, \"approve_unstaking\", \"Approve\")\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 357,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 341,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 267,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 252,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `stake-user-data`,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"data-row\",\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body1\",\n                    children: \"Your Balance\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 375,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body1\",\n                    children: isAppLoading ? /*#__PURE__*/_jsxDEV(Skeleton, {\n                      width: \"80px\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 377,\n                      columnNumber: 41\n                    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [trim(ohmBalance, 4), \" OX\"]\n                    }, void 0, true)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 376,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 374,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"data-row\",\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body1\",\n                    children: \"Your Staked Balance\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 382,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body1\",\n                    children: isAppLoading ? /*#__PURE__*/_jsxDEV(Skeleton, {\n                      width: \"80px\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 384,\n                      columnNumber: 41\n                    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [trimmedBalance, \" sOX\"]\n                    }, void 0, true)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 383,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 381,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"data-row\",\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body1\",\n                    children: \"Next Reward Amount\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 389,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body1\",\n                    children: isAppLoading ? /*#__PURE__*/_jsxDEV(Skeleton, {\n                      width: \"80px\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 391,\n                      columnNumber: 41\n                    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [nextRewardValue, \" sOX\"]\n                    }, void 0, true)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 390,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 388,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"data-row\",\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body1\",\n                    children: \"Next Reward Yield\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 396,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body1\",\n                    children: isAppLoading ? /*#__PURE__*/_jsxDEV(Skeleton, {\n                      width: \"80px\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 398,\n                      columnNumber: 41\n                    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [stakingRebasePercentage, \"%\"]\n                    }, void 0, true)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 397,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 395,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"data-row\",\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body1\",\n                    children: \"ROI (5-Day Rate)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 403,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body1\",\n                    children: isAppLoading ? /*#__PURE__*/_jsxDEV(Skeleton, {\n                      width: \"80px\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 405,\n                      columnNumber: 41\n                    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [trim(fiveDayRate * 100, 4), \"%\"]\n                    }, void 0, true)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 404,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 402,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 373,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 158,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Stake, \"OQHb+7NuvWuTwRcXp3GnY3W3sFE=\", false, function () {\n  return [useDispatch, useWeb3Context, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = Stake;\nexport default Stake;\n\nvar _c;\n\n$RefreshReg$(_c, \"Stake\");","map":{"version":3,"sources":["C:/arete/AlphaDAO-react/src/views/Stake/Stake.jsx"],"names":["useCallback","useState","useDispatch","useSelector","Box","Button","FormControl","Grid","InputAdornment","InputLabel","Link","OutlinedInput","Paper","SvgIcon","Tab","Tabs","Typography","Zoom","NewReleases","RebaseTimer","TabPanel","getOhmTokenImage","getTokenImage","trim","changeApproval","changeStake","useMediaQuery","useWeb3Context","isPendingTxn","txnButtonText","Skeleton","ExternalStakePool","error","ethers","ConnectButton","a11yProps","index","id","sOhmImg","ohmImg","Stake","dispatch","provider","address","connected","connect","chainID","zoomed","setZoomed","view","setView","quantity","setQuantity","isAppLoading","state","app","loading","currentIndex","fiveDayRate","ohmBalance","account","balances","ohm","sohmBalance","sohm","fsohmBalance","fsohm","wsohmBalance","wsohm","stakeAllowance","staking","ohmStake","unstakeAllowance","ohmUnstake","stakingRebase","stakingAPY","stakingTVL","pendingTransactions","setMax","onSeekApproval","token","networkID","onChangeStake","action","isNaN","gweiValue","utils","parseUnits","gt","value","toString","hasAllowance","isAllowanceDataLoading","modalButton","push","changeView","event","newView","trimmedBalance","Number","filter","Boolean","map","balance","reduce","a","b","toFixed","trimmedStakingAPY","stakingRebasePercentage","nextRewardValue","Intl","NumberFormat","format","style","currency","maximumFractionDigits","minimumFractionDigits","String","e","target"],"mappings":"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","sourcesContent":["import { useCallback, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  Box,\n  Button,\n  FormControl,\n  Grid,\n  InputAdornment,\n  InputLabel,\n  Link,\n  OutlinedInput,\n  Paper,\n  SvgIcon,\n  Tab,\n  Tabs,\n  Typography,\n  Zoom,\n} from \"@material-ui/core\";\nimport NewReleases from \"@material-ui/icons/NewReleases\";\nimport RebaseTimer from \"../../components/RebaseTimer/RebaseTimer\";\nimport TabPanel from \"../../components/TabPanel\";\nimport { getOhmTokenImage, getTokenImage, trim } from \"../../helpers\";\nimport { changeApproval, changeStake } from \"../../slices/StakeThunk\";\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\nimport \"./stake.scss\";\nimport { useWeb3Context } from \"src/hooks/web3Context\";\nimport { isPendingTxn, txnButtonText } from \"src/slices/PendingTxnsSlice\";\nimport { Skeleton } from \"@material-ui/lab\";\nimport ExternalStakePool from \"./ExternalStakePool\";\nimport { error } from \"../../slices/MessagesSlice\";\nimport { ethers } from \"ethers\";\nimport { ReactComponent as WalletIcon } from \"../../assets/icons/wallet.svg\";\nimport ConnectButton from \"../../components/ConnectButton\";\n\nfunction a11yProps(index) {\n  return {\n    id: `simple-tab-${index}`,\n    \"aria-controls\": `simple-tabpanel-${index}`,\n  };\n}\n\nconst sOhmImg = getTokenImage(\"sohm\");\nconst ohmImg = getOhmTokenImage(16, 16);\n\nfunction Stake() {\n  const dispatch = useDispatch();\n  const { provider, address, connected, connect, chainID } = useWeb3Context();\n\n  const [zoomed, setZoomed] = useState(false);\n  const [view, setView] = useState(0);\n  const [quantity, setQuantity] = useState(\"\");\n\n  const isAppLoading = useSelector(state => state.app.loading);\n  const currentIndex = useSelector(state => {\n    return state.app.currentIndex;\n  });\n  const fiveDayRate = useSelector(state => {\n    return state.app.fiveDayRate;\n  });\n  const ohmBalance = useSelector(state => {\n    return state.account.balances && state.account.balances.ohm;\n  });\n  // const oldSohmBalance = useSelector(state => {\n  //   return state.account.balances && state.account.balances.oldsohm;\n  // });\n  const sohmBalance = useSelector(state => {\n    return state.account.balances && state.account.balances.sohm;\n  });\n  const fsohmBalance = useSelector(state => {\n    return state.account.balances && state.account.balances.fsohm;\n  });\n  const wsohmBalance = useSelector(state => {\n    return state.account.balances && state.account.balances.wsohm;\n  });\n  const stakeAllowance = useSelector(state => {\n    return state.account.staking && state.account.staking.ohmStake;\n  });\n  const unstakeAllowance = useSelector(state => {\n    return state.account.staking && state.account.staking.ohmUnstake;\n  });\n  const stakingRebase = useSelector(state => {\n    return state.app.stakingRebase;\n  });\n  const stakingAPY = useSelector(state => {\n    return state.app.stakingAPY;\n  });\n  const stakingTVL = useSelector(state => {\n    return state.app.stakingTVL;\n  });\n\n  const pendingTransactions = useSelector(state => {\n    return state.pendingTransactions;\n  });\n\n  const setMax = () => {\n    if (view === 0) {\n      setQuantity(ohmBalance);\n    } else {\n      setQuantity(sohmBalance);\n    }\n  };\n\n  const onSeekApproval = async token => {\n    await dispatch(changeApproval({ address, token, provider, networkID: chainID }));\n  };\n\n  const onChangeStake = async action => {\n    // eslint-disable-next-line no-restricted-globals\n    if (isNaN(quantity) || quantity === 0 || quantity === \"\") {\n      // eslint-disable-next-line no-alert\n      return dispatch(error(\"Please enter a value!\"));\n    }\n\n    // 1st catch if quantity > balance\n    let gweiValue = ethers.utils.parseUnits(quantity, \"gwei\");\n    if (action === \"stake\" && gweiValue.gt(ethers.utils.parseUnits(ohmBalance, \"gwei\"))) {\n      return dispatch(error(\"You cannot stake more than your OX balance.\"));\n    }\n\n    if (action === \"unstake\" && gweiValue.gt(ethers.utils.parseUnits(sohmBalance, \"gwei\"))) {\n      return dispatch(error(\"You cannot unstake more than your sOX balance.\"));\n    }\n\n    await dispatch(changeStake({ address, action, value: quantity.toString(), provider, networkID: chainID }));\n  };\n\n  const hasAllowance = useCallback(\n    token => {\n      if (token === \"ohm\") return stakeAllowance > 0;\n      if (token === \"sohm\") return unstakeAllowance > 0;\n      return 0;\n    },\n    [stakeAllowance, unstakeAllowance],\n  );\n\n  const isAllowanceDataLoading = (stakeAllowance == null && view === 0) || (unstakeAllowance == null && view === 1);\n\n  let modalButton = [];\n\n  modalButton.push(<ConnectButton />);\n\n  const changeView = (event, newView) => {\n    setView(newView);\n  };\n\n  const trimmedBalance = Number(\n    [sohmBalance, fsohmBalance, wsohmBalance]\n      .filter(Boolean)\n      .map(balance => Number(balance))\n      .reduce((a, b) => a + b, 0)\n      .toFixed(4),\n  );\n  const trimmedStakingAPY = trim(stakingAPY * 100, 1);\n  const stakingRebasePercentage = trim(stakingRebase * 100, 4);\n  const nextRewardValue = trim((stakingRebasePercentage / 100) * trimmedBalance, 4);\n\n  return (\n    <div id=\"stake-view\" className=\"stake-metrics\">\n      <Zoom in={true} onEntered={() => setZoomed(true)}>\n        <Paper className={`ohm-card`}>\n          <Grid container direction=\"column\" spacing={2}>\n            <Grid item>\n              <div className=\"card-header\">\n                <Typography variant=\"h5\">OX Staking (3,3)</Typography>\n                <RebaseTimer />\n\n                {/*{address && oldSohmBalance > 0.01 && (*/}\n                {/*  <Link*/}\n                {/*    className=\"migrate-sohm-button\"*/}\n                {/*    style={{ textDecoration: \"none\" }}*/}\n                {/*    href=\"https://docs.olympusdao.finance/using-the-website/migrate\"*/}\n                {/*    aria-label=\"migrate-sohm\"*/}\n                {/*    target=\"_blank\"*/}\n                {/*  >*/}\n                {/*    <NewReleases viewBox=\"0 0 24 24\" />*/}\n                {/*    <Typography>Migrate sOHM!</Typography>*/}\n                {/*  </Link>*/}\n                {/*)}*/}\n              </div>\n            </Grid>\n\n            <Grid item>\n              <div className=\"stake-top-metrics\">\n                <Grid container spacing={2} alignItems=\"flex-end\">\n                  <Grid item xs={12} sm={12} md={12} lg={12}>\n                    <div className=\"stake-apy\">\n                      <Typography variant=\"h6\" color=\"textSecondary\">\n                        APY\n                      </Typography>\n                      <Typography variant=\"h4\">\n                        {stakingAPY ? (\n                          <>{new Intl.NumberFormat(\"en-US\").format(stakingAPY)}%</>\n                        ) : (\n                          <Skeleton width=\"150px\" />\n                        )}\n                      </Typography>\n                    </div>\n                  </Grid>\n                </Grid>\n              </div>\n            </Grid>\n\n            <Grid item>\n              <div className=\"stake-top-metrics\">\n                <Grid container spacing={2} alignItems=\"flex-end\">\n                  <Grid item xs={12} sm={6} md={6} lg={6}>\n                    <div className=\"stake-tvl\">\n                      <Typography variant=\"h6\" color=\"textSecondary\">\n                        Total Value Deposited\n                      </Typography>\n                      <Typography variant=\"h4\">\n                        {stakingTVL ? (\n                          new Intl.NumberFormat(\"en-US\", {\n                            style: \"currency\",\n                            currency: \"USD\",\n                            maximumFractionDigits: 0,\n                            minimumFractionDigits: 0,\n                          }).format(stakingTVL)\n                        ) : (\n                          <Skeleton width=\"150px\" />\n                        )}\n                      </Typography>\n                    </div>\n                  </Grid>\n\n                  <Grid item xs={12} sm={6} md={6} lg={6}>\n                    <div className=\"stake-index\">\n                      <Typography variant=\"h6\" color=\"textSecondary\">\n                        Current Index\n                      </Typography>\n                      <Typography variant=\"h4\">\n                        {currentIndex ? <>{trim(currentIndex, 1)} sOX</> : <Skeleton width=\"150px\" />}\n                      </Typography>\n                    </div>\n                  </Grid>\n                </Grid>\n              </div>\n            </Grid>\n\n            <div className=\"staking-area\">\n              {!address ? (\n                <div className=\"stake-wallet-notification\">\n                  <div className=\"wallet-menu\" id=\"wallet-menu\">\n                    {modalButton}\n                  </div>\n                  <Typography color=\"textSecondary\" variant=\"h6\">\n                    Connect your wallet to stake OX\n                  </Typography>\n                </div>\n              ) : (\n                <>\n                  <Box className=\"stake-action-area\">\n                    <Tabs\n                      key={String(zoomed)}\n                      centered\n                      value={view}\n                      textColor=\"primary\"\n                      indicatorColor=\"primary\"\n                      className=\"stake-tab-buttons\"\n                      onChange={changeView}\n                      aria-label=\"stake tabs\"\n                    >\n                      <Tab label=\"STAKE\" {...a11yProps(0)} />\n                      <Tab label=\"UNSTAKE\" {...a11yProps(1)} />\n                    </Tabs>\n\n                    <Box className=\"stake-action-row \" display=\"flex\" alignItems=\"center\">\n                      {address && !isAllowanceDataLoading ? (\n                        (!hasAllowance(\"ohm\") && view === 0) || (!hasAllowance(\"sohm\") && view === 1) ? (\n                          <Box className=\"help-text\">\n                            <Typography variant=\"body1\" align=\"left\" className=\"stake-note\" color=\"textSecondary\">\n                              {view === 0 ? (\n                                <>\n                                  First time staking <b>OX</b>?\n                                  <br />\n                                  Please approve Alpha to use your <b>OX</b> for staking.\n                                </>\n                              ) : (\n                                <>\n                                  First time unstaking <b>sOX</b>?\n                                  <br />\n                                  Please approve Alpha to use your <b>sOX</b> for unstaking.\n                                </>\n                              )}\n                            </Typography>\n                          </Box>\n                        ) : (\n                          <FormControl className=\"ohm-input\" variant=\"outlined\" color=\"primary\">\n                            <InputLabel htmlFor=\"amount-input\"></InputLabel>\n                            <OutlinedInput\n                              id=\"amount-input\"\n                              type=\"number\"\n                              placeholder=\"Enter an amount\"\n                              className=\"stake-input\"\n                              value={quantity}\n                              onChange={e => setQuantity(e.target.value)}\n                              labelWidth={0}\n                              endAdornment={\n                                <InputAdornment position=\"end\">\n                                  <Button variant=\"text\" onClick={setMax} color=\"inherit\">\n                                    Max\n                                  </Button>\n                                </InputAdornment>\n                              }\n                            />\n                          </FormControl>\n                        )\n                      ) : (\n                        <Skeleton width=\"150px\" />\n                      )}\n\n                      <TabPanel value={view} index={0} className=\"stake-tab-panel\">\n                        {isAllowanceDataLoading ? (\n                          <Skeleton />\n                        ) : address && hasAllowance(\"ohm\") ? (\n                          <Button\n                            className=\"stake-button\"\n                            variant=\"contained\"\n                            color=\"primary\"\n                            disabled={isPendingTxn(pendingTransactions, \"staking\")}\n                            onClick={() => {\n                              onChangeStake(\"stake\");\n                            }}\n                          >\n                            {txnButtonText(pendingTransactions, \"staking\", \"Stake OX\")}\n                          </Button>\n                        ) : (\n                          <Button\n                            className=\"stake-button\"\n                            variant=\"contained\"\n                            color=\"primary\"\n                            disabled={isPendingTxn(pendingTransactions, \"approve_staking\")}\n                            onClick={() => {\n                              onSeekApproval(\"ohm\");\n                            }}\n                          >\n                            {txnButtonText(pendingTransactions, \"approve_staking\", \"Approve\")}\n                          </Button>\n                        )}\n                      </TabPanel>\n                      <TabPanel value={view} index={1} className=\"stake-tab-panel\">\n                        {isAllowanceDataLoading ? (\n                          <Skeleton />\n                        ) : address && hasAllowance(\"sohm\") ? (\n                          <Button\n                            className=\"stake-button\"\n                            variant=\"contained\"\n                            color=\"primary\"\n                            disabled={isPendingTxn(pendingTransactions, \"unstaking\")}\n                            onClick={() => {\n                              onChangeStake(\"unstake\");\n                            }}\n                          >\n                            {txnButtonText(pendingTransactions, \"unstaking\", \"Unstake OX\")}\n                          </Button>\n                        ) : (\n                          <Button\n                            className=\"stake-button\"\n                            variant=\"contained\"\n                            color=\"primary\"\n                            disabled={isPendingTxn(pendingTransactions, \"approve_unstaking\")}\n                            onClick={() => {\n                              onSeekApproval(\"sohm\");\n                            }}\n                          >\n                            {txnButtonText(pendingTransactions, \"approve_unstaking\", \"Approve\")}\n                          </Button>\n                        )}\n                      </TabPanel>\n                    </Box>\n                  </Box>\n\n                  <div className={`stake-user-data`}>\n                    <div className=\"data-row\">\n                      <Typography variant=\"body1\">Your Balance</Typography>\n                      <Typography variant=\"body1\">\n                        {isAppLoading ? <Skeleton width=\"80px\" /> : <>{trim(ohmBalance, 4)} OX</>}\n                      </Typography>\n                    </div>\n\n                    <div className=\"data-row\">\n                      <Typography variant=\"body1\">Your Staked Balance</Typography>\n                      <Typography variant=\"body1\">\n                        {isAppLoading ? <Skeleton width=\"80px\" /> : <>{trimmedBalance} sOX</>}\n                      </Typography>\n                    </div>\n\n                    <div className=\"data-row\">\n                      <Typography variant=\"body1\">Next Reward Amount</Typography>\n                      <Typography variant=\"body1\">\n                        {isAppLoading ? <Skeleton width=\"80px\" /> : <>{nextRewardValue} sOX</>}\n                      </Typography>\n                    </div>\n\n                    <div className=\"data-row\">\n                      <Typography variant=\"body1\">Next Reward Yield</Typography>\n                      <Typography variant=\"body1\">\n                        {isAppLoading ? <Skeleton width=\"80px\" /> : <>{stakingRebasePercentage}%</>}\n                      </Typography>\n                    </div>\n\n                    <div className=\"data-row\">\n                      <Typography variant=\"body1\">ROI (5-Day Rate)</Typography>\n                      <Typography variant=\"body1\">\n                        {isAppLoading ? <Skeleton width=\"80px\" /> : <>{trim(fiveDayRate * 100, 4)}%</>}\n                      </Typography>\n                    </div>\n                  </div>\n                </>\n              )}\n            </div>\n          </Grid>\n        </Paper>\n      </Zoom>\n\n      {/*<ExternalStakePool />*/}\n    </div>\n  );\n}\n\nexport default Stake;\n"]},"metadata":{},"sourceType":"module"}